<?php
use PHPUnit\Framework\TestCase;

class PenTest extends TestCase
{
    private $pen;

    public function setUp()
    {
        $this->pen = new Decorator\Pen;
    }

    public function assertPreConditions()
    {
        $this->assertEquals(Decorator\Pen::DEFAULT_INK_LEVEL, $this->pen->getInkLevel());
    }

    public function testWriteSomething()
    {
        $this->assertEquals(SOMETHING_TO_WRITE, $this->pen->write(SOMETHING_TO_WRITE));
    }

    public function testInkLevelIsUsedWhenWriting()
    {
        $this->pen->write(SOMETHING_TO_WRITE);
        $this->assertEquals(
           Decorator\Pen::DEFAULT_INK_LEVEL - strlen(SOMETHING_TO_WRITE),
           $this->pen->getInkLevel());
    }

    public function testOutOfInk()
    {
        $this->pen->write(str_repeat('a', Decorator\Pen::DEFAULT_INK_LEVEL - 1));
        $this->expectException("RunTimeException");
        $this->expectExceptionMessage('ink');
        $this->pen->write('hurray');
    }
}